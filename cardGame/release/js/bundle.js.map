{"version":3,"sources":["webpack:///webpack/bootstrap 59ff595868a258590a7b","webpack:///./src/app.js","webpack:///./src/preloadimage.js","webpack:///./src/cardGames.js","webpack:///./src/app.css?f60c","webpack:///./src/app.css","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js","webpack:///./src/utils/index.js","webpack:///./src/instance/init.js","webpack:///./src/config/index.js","webpack:///./src/instance/depend.js","webpack:///./src/observer/index.js","webpack:///./src/instance/layout.js","webpack:///./src/instance/event.js","webpack:///./src/instance/trigger.js","webpack:///./src/instance/animrelated.js","webpack:///./src/instance/destroy.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C;AAC7C;AACA;;;AAGA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA,yBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;AAGD;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA,gCAA+B,0BAA0B,YAAY;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;;;AAGA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;;AAGA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,EAAC;;;AAGD;AACA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,EAAC;;;;AAID;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;AAGD;AACA;AACA,WAAU;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;;;;;;ACtXA;AACA;AACA;AACA,oBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvBA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;AACF;AACA;AACA,EAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;ACjCA;;AAEA;AACA;AACA;AACA;AACA,gDAAgF;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,iCAAgC,UAAU,EAAE;AAC5C,E;;;;;;ACpBA;AACA;;;AAGA;AACA,sDAAqD,uBAAuB,eAAe,EAAE,2BAA2B,wCAAwC,gCAAgC,0BAA0B,6CAA6C,EAAE,8BAA8B,uBAAuB,WAAW,YAAY,iBAAiB,gBAAgB,eAAe,uCAAuC,oCAAoC,mCAAmC,kCAAkC,+BAA+B,EAAE,uCAAuC,wCAAwC,gCAAgC,EAAE,2CAA2C,mBAAmB,gBAAgB,0BAA0B,EAAE,8CAA8C,uCAAuC,oCAAoC,mCAAmC,kCAAkC,+BAA+B,sCAAsC,mCAAmC,8BAA8B,EAAE,6CAA6C,kCAAkC,+BAA+B,8BAA8B,6BAA6B,0BAA0B,8CAA8C,2CAA2C,sCAAsC,eAAe,EAAE,2DAA2D,eAAe,EAAE,sIAAsI,QAAQ,uDAAuD,EAAE,SAAS,4DAA4D,4CAA4C,UAAU,4DAA4D,EAAE,EAAE,+BAA+B,QAAQ,oDAAoD,EAAE,SAAS,yDAAyD,4CAA4C,UAAU,yDAAyD,EAAE,EAAE,0BAA0B,QAAQ,uDAAuD,oDAAoD,mDAAmD,kDAAkD,+CAA+C,EAAE,SAAS,4DAA4D,yDAAyD,wDAAwD,uDAAuD,oDAAoD,4CAA4C,UAAU,4DAA4D,yDAAyD,wDAAwD,uDAAuD,oDAAoD,EAAE,EAAE,0CAA0C,QAAQ,6DAA6D,EAAE,SAAS,2DAA2D,4CAA4C,UAAU,uDAAuD,EAAE,EAAE,uCAAuC,QAAQ,0DAA0D,EAAE,SAAS,wDAAwD,4CAA4C,UAAU,oDAAoD,EAAE,EAAE,kCAAkC,QAAQ,6DAA6D,0DAA0D,yDAAyD,wDAAwD,qDAAqD,EAAE,SAAS,2DAA2D,wDAAwD,uDAAuD,sDAAsD,mDAAmD,4CAA4C,UAAU,uDAAuD,oDAAoD,mDAAmD,kDAAkD,+CAA+C,EAAE,EAAE;;AAE9/I;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA,yCAAwC,gBAAgB;AACxD,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,aAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjDA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,wDAAuD;AACvD;;AAEA,8BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA;;;;;;;AC1NA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAU,OAAO;AACjB;AACA;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;AAEA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,+BAA8B,OAAO;AACrC;AACA,MAAK;AACL;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,EAAC;;AAED,6CAA4C;AAC5C;AACA;AACA;AACA;AACA,EAAC;;AAED;;;;;;;;AC3IA,uC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,8DAA6D;;AAE7D;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;;AC/CA;AACA;AACA,WAAU;AACV;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC9BA;;AAEA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,oBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA,gDAA+C,SAAS;AACxD;AACA,4DAA2D,cAAc;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,wBAAwB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA,gDAA+C,SAAS;AACxD,4DAA2D,cAAc;AACzE;AACA;AACA;AACA;AACA;;AAEA;AACA,4CAA2C,SAAS;AACpD;AACA,4DAA2D,cAAc;AACzE;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;;;;;;;;;AChKA;AACA;AACA,aAAY,OAAO;AACnB;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gDAA+C,SAAS;AACxD;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;ACnFA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,EAAE,WAAW,EAAE,kDAAkD,OAAO,EAAE,GAAG,QAAQ,EAAE,GAAG,cAAc,YAAY,EAAE,GAAG;AACxJ;AACA,+BAA8B,EAAE,UAAU,EAAE,WAAW,EAAE;AACzD;AACA;AACA,+BAA8B,EAAE,UAAU,EAAE,WAAW,EAAE;AACzD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,EAAE,GAAG;AACzB,sBAAqB,EAAE,GAAG;AAC1B,oBAAmB,EAAE,GAAG;AACxB,gCAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,wBAAuB,SAAS;AAChC;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;;;;;;AChGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,GAAE;AACF;AACA;;;;;;;AClBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAiE;AACjE;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACpDA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,kBAAkB;AACjC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA,kBAAiB;AACjB,UAAS;AACT;AACA;AACA;AACA,MAAK,OAAO;AACZ;AACA;AACA;AACA,UAAS;AACT;AACA;;;;;;;AC/LA;AACA;AACA,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,E","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./release//js\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 59ff595868a258590a7b\n **/","'use strict';\r\n\r\n//预加载图片\r\nrequire('./preloadimage').load();\r\n\r\nvar CardGames = require('./cardGames');\r\nvar utils = require('./utils');\r\n\r\n\r\n//游戏时间\r\nvar GameTime = 30000; //ms单位 \r\n//每次游戏关数\r\nvar GameCount = 3;\r\n//允许玩的游戏次数\r\nvar AllowPlayCount  = 3;\r\n\r\n\r\n//开始时间\r\nvar startTime = 0\r\n//玩的次数\r\nvar playCount = 0;\r\nvar $homePage        = $('.home-page');\r\nvar $contentPage     = $('.content-page');\r\nvar $lotteryPage     = $('.lottery-page');\r\nvar $winningPage     = $('.winning-page');\r\nvar $element         = $('.banner-right .score');\r\nvar $lotteryPlay     = $('.lottery-play');\r\nvar $lotteryIntegral = $('.lottery-integral-right');\r\nvar $lotteryTime     = $('.lottery-time-right');\r\nvar $winningShow     = $('.winning-show em');\r\nvar $lotteryLottery  = $('.lottery-lottery');//抽奖\r\nvar $winningButton   = $(\".winning-button\");\r\nvar $startButton     = $('.start-button');\r\n\r\n\r\n/**\r\n * 音乐\r\n * @return {[type]} [description]\r\n */\r\nvar Music = function() {\r\n    var instance = null; //存放不同音轨的一个实例\r\n    return {\r\n        paly: function(url) {\r\n            var audio;\r\n            if (instance) {\r\n                audio = instance;\r\n                audio.src = url;\r\n            } else {\r\n                audio = new Audio(url);\r\n            }\r\n            audio.autoplay = true;\r\n            audio.play();\r\n            //更新音轨\r\n            instance = audio;\r\n        }\r\n    }\r\n}();\r\n\r\n\r\n/**\r\n * 分数更新\r\n * @type {Number}\r\n */\r\nvar integral = function() {\r\n    var $element = $('.banner-right .score');\r\n    var score = 0;\r\n    //更新分数\r\n    var update = function() {\r\n        $element.text(score);\r\n    }\r\n    return {\r\n        add: function() {\r\n            score += 10;\r\n            update();\r\n            Music.paly('music/score.mp3');\r\n        },\r\n        reduce: function() {\r\n            score -= 3;\r\n            if (score < 1) {\r\n                score = 0;\r\n            }\r\n            update();\r\n        },\r\n        reset: function() {\r\n            score = 0;\r\n            update();\r\n        },\r\n        get: function() {\r\n            return score;\r\n        }\r\n    }\r\n}();\r\n\r\n/**\r\n * 倒计时处理\r\n * @return {[type]} [description]\r\n */\r\nvar slidebox = new function() {\r\n    var timer;\r\n    var $dotWrap = $('.dot-wrap');\r\n    var $ems = $dotWrap.find('em')\r\n    var vernier = $ems.length;\r\n    var rate = GameTime / vernier;\r\n    var self = this;\r\n    var timercallabck = null;\r\n\r\n    function clear() {\r\n        clearTimeout(timer)\r\n        timer = null;\r\n    }\r\n\r\n    function updatedot() {\r\n        var em;\r\n        if (em = $ems[--vernier]) {\r\n            em.style.backgroundColor = '#BCDFF4';\r\n        }\r\n        if (!em) {\r\n            clear()\r\n            overTime(timercallabck);\r\n            return;\r\n        }\r\n    }\r\n\r\n    function run() {\r\n        timer = setTimeout(function() {\r\n            updatedot();\r\n            timer && run();\r\n        }, rate)\r\n    }\r\n\r\n    self.start = function() {\r\n        run();\r\n    }\r\n\r\n    self.destroy = function() {\r\n        clear();\r\n        vernier = $ems.length;\r\n        $ems.css('backgroundColor', '#FFED42')\r\n    }\r\n\r\n    self.watch = function(timeout, callback) {\r\n        timercallabck = callback;\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * 超时处理\r\n * @return {[type]} [description]\r\n */\r\nfunction overTime(callback) {\r\n    var l = layer.open({\r\n        // style: 'border:none; background-color:#78BA32; color:#fff;',\r\n        className: 'popuo-login',\r\n        btn: ['OK'],\r\n        content: '游戏超时，请重新开始游戏！',\r\n        yes: function(elem) {\r\n            callback();\r\n            resetGames();\r\n            layer.close(l)\r\n            l = null;\r\n        }\r\n    })\r\n}\r\n\r\n//游戏次数\r\nvar GameTotal = 0;\r\n//内容节点class名\r\nvar className = '.content-page-card';\r\n\r\n/**\r\n * 开始游戏\r\n * @return {[type]} [description]\r\n */\r\nfunction createGames() {\r\n    slidebox.start();\r\n    ++GameTotal;\r\n    var cardGames = new CardGames(className)\r\n    cardGames.$watch('success', integral.add)\r\n    cardGames.$watch('fail', integral.reduce)\r\n    cardGames.$watch('complete', function() {\r\n        slidebox.destroy();\r\n        cardGames.destroy();\r\n        selectGame()\r\n    });\r\n    //超时回调\r\n    slidebox.watch('timeout', function() {\r\n        slidebox.destroy();\r\n        cardGames.destroy();\r\n    })\r\n}\r\n\r\n\r\n/**\r\n * 选择游戏\r\n * @return {[type]} [description]\r\n */\r\nfunction selectGame() {\r\n    //游戏结束\r\n    if (GameTotal >= GameCount) {\r\n        GameOver();\r\n        return;\r\n    }\r\n    //继续游戏\r\n    createGames();\r\n}\r\n\r\n/**\r\n * 时间格式\r\n * @return {[type]} [description]\r\n */\r\nNumber.prototype.formatTime = function() {\r\n    // 计算\r\n    var h = 0,\r\n        i = 0,\r\n        s = parseInt(this);\r\n    if (s > 60) {\r\n        i = parseInt(s / 60);\r\n        s = parseInt(s % 60);\r\n        if (i > 60) {\r\n            h = parseInt(i / 60);\r\n            i = parseInt(i % 60);\r\n        }\r\n    }\r\n    // 补零\r\n    var zero = function(v) {\r\n        return (v >> 0) < 10 ? \"0\" + v : v;\r\n    };\r\n    return [zero(h), zero(i), zero(s)].join(\":\");\r\n};\r\n\r\n\r\nfunction visible($element) {\r\n    $element.css('visibility', 'visible');\r\n}\r\n\r\nfunction hidden($element) {\r\n    $element.css('visibility', 'hidden');\r\n}\r\n\r\n/**\r\n * 游戏结束\r\n * 尾页\r\n * @return {[type]} [description]\r\n */\r\nfunction GameOver() {\r\n\r\n    Music.paly('music/through.mp3');\r\n\r\n    ++playCount;\r\n\r\n    //星星处理\r\n    $lotteryPage.find(\"li:lt(\" + playCount + \")\").removeClass('unachieved').addClass('achieved')\r\n\r\n    //处理页面逻辑\r\n    visible($lotteryPage);\r\n    hidden($contentPage);\r\n    hidden($winningPage);\r\n\r\n    //得分处理\r\n    $lotteryIntegral.text(integral.get())\r\n    var time = Math.round((utils.getTime() - startTime) / 60)\r\n    $lotteryTime.text(Number(time).formatTime());\r\n\r\n\r\n    //限制玩的次数\r\n    if (playCount === AllowPlayCount) {\r\n        $lotteryPlay.off();\r\n        $winningButton.off();\r\n    }\r\n}\r\n\r\n\r\n\r\n/**\r\n * 重设游戏\r\n * @return {[type]} [description]\r\n */\r\nfunction resetGames() {\r\n    GameTotal = 0;\r\n    integral.reset();\r\n    hidden($contentPage);\r\n    visible($homePage)\r\n}\r\n\r\n/**\r\n * 开始页面\r\n * @param  {[type]} e [description]\r\n * @return {[type]}   [description]\r\n */\r\nfunction startContent(e) {\r\n    createGames('.content-page-card');\r\n    visible($contentPage)\r\n    $homePage.addClass('animated zoomOutUp')\r\n        .on(utils.style.animationend, function() {\r\n            $homePage.off(utils.style.animationend);\r\n            hidden($homePage)\r\n            $homePage.removeClass('animated zoomOutUp')\r\n            return false;\r\n        })\r\n}\r\n\r\n\r\n/**\r\n * 开始按钮\r\n * @return {[type]}    [description]\r\n */\r\n$startButton.on(utils.event.start, function(e) {\r\n    startTime = utils.getTime();\r\n    startContent(e);\r\n    return false;\r\n})\r\n\r\n\r\n/**\r\n * 得分页面\r\n * 再玩一次\r\n * @return {[type]}     [description]\r\n */\r\n$lotteryPlay.on(utils.event.start, function() {\r\n    hidden($lotteryPage)\r\n    resetGames();\r\n    return false;\r\n});\r\n\r\n\r\n\r\n/**\r\n * 获奖页面\r\n * 返回主页\r\n */\r\nfunction bindWinningButton(argument) {\r\n    if (playCount !== AllowPlayCount) {\r\n        $winningButton.on(utils.event.start, function() {\r\n            $winningButton.off();\r\n            resetGames();\r\n            hidden($lotteryPage)\r\n            return false;\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * 点击抽奖\r\n * @type {[type]}\r\n */\r\n$lotteryLottery.on(utils.event.start, function() {\r\n    visible($winningPage);\r\n    hidden($lotteryPage);\r\n    $winningShow.text(\"100元礼品卷\").addClass('animated flash');\r\n    bindWinningButton()\r\n    return false;\r\n});\r\n\r\n\r\n/**\r\n * 测试代码\r\n * @type {[type]}\r\n */\r\nvar test = false;\r\n\r\nif(test){\r\n    GameTime = 300000;\r\n    startTime = utils.getTime();\r\n    setTimeout(function() {\r\n        lotteryPage()\r\n    }, 100)\r\n    visible($contentPage)\r\n    $homePage.addClass('animated zoomOutUp')\r\n        .on('webkitAnimationEnd animationend', function() {\r\n            $homePage.off();\r\n            hidden($homePage)\r\n            $homePage.removeClass('animated zoomOutUp')\r\n        })\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app.js\n ** module id = 0\n ** module chunks = 0\n **/","function preloadimages(arr) {\r\n    var newimages = []\r\n    var arr = (typeof arr != \"object\") ? [arr] : arr //确保参数总是数组\r\n    for (var i = 0; i < arr.length; i++) {\r\n        newimages[i] = new Image()\r\n        newimages[i].src = arr[i]\r\n        newimages[i].onload = function(src){\r\n        \tconsole.log('图片加载完毕: '+ src )\r\n        }(arr[i])\r\n    }\r\n}\r\n\r\n \r\nexports.load = function() {\r\n    preloadimages([\r\n        'images/back1.jpg',\r\n        'images/back2.jpg',\r\n        'images/back3.jpg',\r\n        'images/front.jpg',\r\n        'images/lottery-grade.jpg',\r\n        'images/lottery.jpg',\r\n        'images/winning.jpg'\r\n    ]);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/preloadimage.js\n ** module id = 1\n ** module chunks = 0\n **/","'use strict';\r\n\r\nrequire('./app.css');\r\n\r\nvar utils = require('./utils');\r\n\r\nvar Manager = function(element, options) {\r\n\tthis._init(element, options);\r\n};\r\n\r\nvar p = Manager.prototype;\r\n\r\nObject.defineProperty(p, '$watch', {\r\n\tvalue: function(key, callback) {\r\n\t\tvar self = this;\r\n\t\tthis.observer.on('change:' + key, function() {\r\n\t\t\tcallback.apply(self, arguments)\r\n\t\t})\r\n\t},\r\n\tenumerable   : true,\r\n\tconfigurable : true\r\n})\r\n\r\n\r\nutils.extend(p, require('./instance/init'));\r\nutils.extend(p, require('./instance/layout'));\r\nutils.extend(p, require('./instance/event'));\r\nutils.extend(p, require('./instance/trigger'));\r\nutils.extend(p, require('./instance/animrelated'));\r\nutils.extend(p, require('./instance/destroy'));\r\n\r\nwindow['CardGames'] = Manager;\r\n\r\nmodule.exports = Manager\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/cardGames.js\n ** module id = 2\n ** module chunks = 0\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/sass-loader/index.js!./app.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./../node_modules/sass-loader/index.js!./app.css\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/sass-loader/index.js!./app.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app.css\n ** module id = 3\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".cd-gallery li.is-visible {\\n  position: relative;\\n  z-index: 5; }\\n\\n.cd-item-wrapper > li {\\n  -webkit-backface-visibility: hidden;\\n  backface-visibility: hidden;\\n  border-radius: 0.25em;\\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1); }\\n\\n.cd-gallery li.is-hidden {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  height: 100%;\\n  width: 100%;\\n  z-index: 1;\\n  -webkit-transform: rotateY(180deg);\\n  -moz-transform: rotateY(180deg);\\n  -ms-transform: rotateY(180deg);\\n  -o-transform: rotateY(180deg);\\n  transform: rotateY(180deg); }\\n\\n.cd-gallery .cd-item-wrapper > li {\\n  -webkit-backface-visibility: hidden;\\n  backface-visibility: hidden; }\\n\\n.cd-gallery .cd-item-wrapper > li img {\\n  display: block;\\n  width: 100%;\\n  border-radius: 0.45em; }\\n\\n.cd-item-wrapper.is-switched .is-visible {\\n  -webkit-transform: rotateY(180deg);\\n  -moz-transform: rotateY(180deg);\\n  -ms-transform: rotateY(180deg);\\n  -o-transform: rotateY(180deg);\\n  transform: rotateY(180deg);\\n  -webkit-animation: cd-rotate 0.5s;\\n  -moz-animation: cd-rotate 0.5s;\\n  animation: cd-rotate 0.5s; }\\n\\n.cd-item-wrapper.is-switched .is-hidden {\\n  -webkit-transform: rotateY(0);\\n  -moz-transform: rotateY(0);\\n  -ms-transform: rotateY(0);\\n  -o-transform: rotateY(0);\\n  transform: rotateY(0);\\n  -webkit-animation: cd-rotate-inverse 0.5s;\\n  -moz-animation: cd-rotate-inverse 0.5s;\\n  animation: cd-rotate-inverse 0.5s;\\n  opacity: 0; }\\n\\n.cd-gallery .cd-item-wrapper.is-switched .is-selected {\\n  opacity: 1; }\\n\\n/* -------------------------------- \\r\\n\\r\\nxkeyframes \\r\\n\\r\\n-------------------------------- */\\n@-webkit-keyframes cd-rotate {\\n  0% {\\n    -webkit-transform: perspective(800px) rotateY(0); }\\n  70% {\\n    -webkit-transform: perspective(800px) rotateY(200deg);\\n    /* this creates the bounce effect */ }\\n  100% {\\n    -webkit-transform: perspective(800px) rotateY(180deg); } }\\n\\n@-moz-keyframes cd-rotate {\\n  0% {\\n    -moz-transform: perspective(800px) rotateY(0); }\\n  70% {\\n    -moz-transform: perspective(800px) rotateY(200deg);\\n    /* this creates the bounce effect */ }\\n  100% {\\n    -moz-transform: perspective(800px) rotateY(180deg); } }\\n\\n@keyframes cd-rotate {\\n  0% {\\n    -webkit-transform: perspective(800px) rotateY(0);\\n    -moz-transform: perspective(800px) rotateY(0);\\n    -ms-transform: perspective(800px) rotateY(0);\\n    -o-transform: perspective(800px) rotateY(0);\\n    transform: perspective(800px) rotateY(0); }\\n  70% {\\n    -webkit-transform: perspective(800px) rotateY(200deg);\\n    -moz-transform: perspective(800px) rotateY(200deg);\\n    -ms-transform: perspective(800px) rotateY(200deg);\\n    -o-transform: perspective(800px) rotateY(200deg);\\n    transform: perspective(800px) rotateY(200deg);\\n    /* this creates the bounce effect */ }\\n  100% {\\n    -webkit-transform: perspective(800px) rotateY(180deg);\\n    -moz-transform: perspective(800px) rotateY(180deg);\\n    -ms-transform: perspective(800px) rotateY(180deg);\\n    -o-transform: perspective(800px) rotateY(180deg);\\n    transform: perspective(800px) rotateY(180deg); } }\\n\\n@-webkit-keyframes cd-rotate-inverse {\\n  0% {\\n    -webkit-transform: perspective(800px) rotateY(-180deg); }\\n  70% {\\n    -webkit-transform: perspective(800px) rotateY(20deg);\\n    /* this creates the bounce effect */ }\\n  100% {\\n    -webkit-transform: perspective(800px) rotateY(0); } }\\n\\n@-moz-keyframes cd-rotate-inverse {\\n  0% {\\n    -moz-transform: perspective(800px) rotateY(-180deg); }\\n  70% {\\n    -moz-transform: perspective(800px) rotateY(20deg);\\n    /* this creates the bounce effect */ }\\n  100% {\\n    -moz-transform: perspective(800px) rotateY(0); } }\\n\\n@keyframes cd-rotate-inverse {\\n  0% {\\n    -webkit-transform: perspective(800px) rotateY(-180deg);\\n    -moz-transform: perspective(800px) rotateY(-180deg);\\n    -ms-transform: perspective(800px) rotateY(-180deg);\\n    -o-transform: perspective(800px) rotateY(-180deg);\\n    transform: perspective(800px) rotateY(-180deg); }\\n  70% {\\n    -webkit-transform: perspective(800px) rotateY(20deg);\\n    -moz-transform: perspective(800px) rotateY(20deg);\\n    -ms-transform: perspective(800px) rotateY(20deg);\\n    -o-transform: perspective(800px) rotateY(20deg);\\n    transform: perspective(800px) rotateY(20deg);\\n    /* this creates the bounce effect */ }\\n  100% {\\n    -webkit-transform: perspective(800px) rotateY(0);\\n    -moz-transform: perspective(800px) rotateY(0);\\n    -ms-transform: perspective(800px) rotateY(0);\\n    -o-transform: perspective(800px) rotateY(0);\\n    transform: perspective(800px) rotateY(0); } }\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/sass-loader!./src/app.css\n ** module id = 4\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 5\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0;\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction createStyleElement() {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tvar head = getHeadElement();\r\n\tstyleElement.type = \"text/css\";\r\n\thead.appendChild(styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement() {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tvar head = getHeadElement();\r\n\tlinkElement.rel = \"stylesheet\";\r\n\thead.appendChild(linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement());\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement();\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tstyleElement.parentNode.removeChild(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement();\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tstyleElement.parentNode.removeChild(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 6\n ** module chunks = 0\n **/","var utils = {};\r\n\r\nvar _elementStyle = document.createElement('div').style;\r\nvar _vendor = (function() {\r\n    var vendors = ['t', 'webkitT', 'MozT', 'msT', 'OT'],\r\n        transform,\r\n        i = 0,\r\n        l = vendors.length;\r\n\r\n    for (; i < l; i++) {\r\n        transform = vendors[i] + 'ransform';\r\n        if (transform in _elementStyle) return vendors[i].substr(0, vendors[i].length - 1);\r\n    }\r\n\r\n    return false;\r\n})();\r\n\r\nfunction _prefixStyle(style, Joining) {\r\n    Joining = Joining || ''\r\n    if (_vendor === false) return false;\r\n    if (_vendor === '') return style;\r\n    return _vendor + Joining + style.charAt(0).toUpperCase() + style.substr(1);\r\n}\r\n\r\nutils.getTime = Date.now || function getTime() {\r\n    return new Date().getTime();\r\n};\r\n\r\nutils.extend = function(dest, src, merge) {\r\n    var keys = Object.keys(src);\r\n    var i = 0;\r\n    while (i < keys.length) {\r\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\r\n            dest[keys[i]] = src[keys[i]];\r\n        }\r\n        i++;\r\n    }\r\n    return dest;\r\n};\r\n\r\nutils.merge = function(dest, src) {\r\n    return utils.extend(dest, src, true);\r\n}\r\n\r\nutils.addEvent = function(el, type, fn, capture) {\r\n    el.addEventListener(type, fn, !!capture);\r\n};\r\n\r\nutils.removeEvent = function(el, type, fn, capture) {\r\n    el.removeEventListener(type, fn, !!capture);\r\n};\r\n\r\nvar _transform = _prefixStyle('transform');\r\n\r\nutils.extend(utils, {\r\n    hasTransform: _transform !== false,\r\n    hasPerspective: _prefixStyle('perspective') in _elementStyle,\r\n    hasTouch: 'ontouchstart' in window,\r\n    hasPointer: navigator.msPointerEnabled,\r\n    hasTransition: _prefixStyle('transition') in _elementStyle\r\n});\r\nutils.isBadAndroid = /Android /.test(window.navigator.appVersion) && !(/Chrome\\/\\d/.test(window.navigator.appVersion));\r\n\r\nutils.extend(utils.style = {}, {\r\n    transform                : _transform,\r\n    transitionTimingFunction : _prefixStyle('transitionTimingFunction'),\r\n    transitionDuration       : _prefixStyle('transitionDuration'),\r\n    transitionDelay          : _prefixStyle('transitionDelay'),\r\n    transformOrigin          : _prefixStyle('transformOrigin')\r\n});\r\n\r\nutils.hasClass = function(e, c) {\r\n    var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\");\r\n    return re.test(e.className);\r\n};\r\n\r\nutils.addClass = function(e, c) {\r\n    if (utils.hasClass(e, c)) {\r\n        return;\r\n    }\r\n    var newclass = e.className.split(' ');\r\n    newclass.push(c);\r\n    e.className = newclass.join(' ');\r\n};\r\n\r\nutils.removeClass = function(e, c) {\r\n    if (!utils.hasClass(e, c)) {\r\n        return;\r\n    }\r\n    var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\", 'g');\r\n    e.className = e.className.replace(re, ' ');\r\n};\r\n\r\nutils.format = function(content) {\r\n    var args = [].slice.call(arguments, 1, arguments.length);\r\n    return content.replace(/\\{(\\d+)\\}/g, function(m, i) {\r\n        return args[i];\r\n    });\r\n}\r\n\r\n\r\nvar TRANSITION_END = 'transitionend';\r\nvar ANIMATION_END = 'animationend';\r\nvar KEYFRAMES = '@keyframes ';\r\n\r\n(function() {\r\n    var vendors = _prefixStyle('animation', '-');\r\n    var TRANSITION_END_NAMES = {\r\n        \"moz\"    : \"transitionend\",\r\n        \"webkit\" : \"webkitTransitionEnd\",\r\n        \"ms\"     : \"MSTransitionEnd\",\r\n        \"o\"      : \"oTransitionEnd\"\r\n    };\r\n    var ANIMATION_END_NAMES = {\r\n        \"moz\"    : \"animationend\",\r\n        \"webkit\" : \"webkitAnimationEnd\",\r\n        \"ms\"     : \"MSAnimationEnd\",\r\n        \"o\"      : \"oAnimationEnd\"\r\n    };\r\n    if (!vendors) return;\r\n    vendors = vendors.split('-');\r\n    if (!vendors[1]) return;\r\n    TRANSITION_END = TRANSITION_END_NAMES[vendors[0]];\r\n    ANIMATION_END = ANIMATION_END_NAMES[vendors[0]];\r\n    KEYFRAMES = '@-' + vendors[1] + '-keyframes ';\r\n})();\r\n\r\nutils.extend(utils.style, {\r\n    keyframes     : KEYFRAMES,\r\n    animationend  : ANIMATION_END,\r\n    transitionend : TRANSITION_END\r\n})\r\n    \r\nutils.extend(utils.event = utils.event || {}, {\r\n    start  : utils.hasTouch ? 'touchstart' : 'mousedown',\r\n    move   : utils.hasTouch ? 'touchmove' : 'mousemove',\r\n    end    : utils.hasTouch ? 'touchend' : 'mouseup',\r\n    cancel : utils.hasTouch ? 'touchcancel' : 'mouseup'\r\n})\r\n\r\nmodule.exports = utils;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/utils/index.js\n ** module id = 7\n ** module chunks = 0\n **/","\r\nvar utils    = require('../utils'); \r\nvar config   = require('../config');\r\nvar depend   = require('./depend');\r\nvar Observer = require('../observer');\r\n\r\n/**\r\n * 初始化数据\r\n */\r\nexports._init = function(element,options) {\r\n    \r\n    //页面容器\r\n    var $container = this.$container = $(element);\r\n    options        = this.options = utils.merge(options || {}, config);\r\n\r\n    //区域尺寸\r\n    this.contentWidth  = parseInt($container.css('width'))\r\n    this.contentHeight = parseInt($container.css('Height'))\r\n\r\n    //布局的原始排序\r\n\tthis.originalOrder = depend.nature(options.level.row, options.level.col);\r\n\r\n    if (options.random) {\r\n        //新是随机排序\r\n        this.randomOrder = depend.random(this.originalOrder, options.random);\r\n    } else {\r\n        this.randomOrder = this.originalOrder;\r\n    }\r\n\r\n \r\n    //收集回调\r\n    this.trackAnims = {\r\n        filter      : [], //过滤的元素合集\r\n        cache       : [], //一个元素动画2次回调处理\r\n        elems       : [], //触发的元素\r\n        triggerTime : [], //手动触发\r\n        times       : 0, //完成次数\r\n        total       : options.level.row * options.level.col //总数\r\n    };\r\n\r\n    this.observer = new Observer();\r\n\r\n    //开始构建\r\n    this._initCreate();\r\n\r\n    //构建事件\r\n    this._initEvent();\r\n}\r\n \n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/instance/init.js\n ** module id = 8\n ** module chunks = 0\n **/","/**\r\n * 默认配置文件\r\n * @type {Object}\r\n */\r\nmodule.exports = {\r\n\r\n    level: {\r\n        col: 2,\r\n        row: 3\r\n    },\r\n\r\n    //图片\r\n    images: {\r\n        //正面图\r\n        front: \"images/front.jpg\",\r\n        //背景图,随机分配\r\n        back: [\"images/back1.jpg\", \"images/back2.jpg\", \"images/back3.jpg\"]\r\n    },\r\n\r\n    //图片之间的间距,单位PX\r\n    gap:{\r\n        left : 10,\r\n        top  : 30\r\n    },\r\n\r\n    //随机\r\n    //0 不随机\r\n    //1 上下随机\r\n    //2 一顿乱搞\r\n    random: 2\r\n\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/config/index.js\n ** module id = 9\n ** module chunks = 0\n **/","\r\nvar animationend = 'webkitAnimationEnd oanimationend msAnimationEnd animationend';\r\n\r\n/**\r\n * 原始布局\r\n * @return {[type]} [description]\r\n */\r\nexports.nature = function(row, col) {\r\n    var order = [];\r\n    var i;\r\n    var j;\r\n    for (i = 0; i < col; i++) {\r\n        for (j = 0; j < row; j++) {\r\n            if (!order[i]) {\r\n                order[i] = [];\r\n            }\r\n            order[i].push(j)\r\n        }\r\n    }\r\n    return order;\r\n}\r\n\r\n/**\r\n * 根据长度随机\r\n * @param  {[type]} len [description]\r\n * @return {[type]}     [description]\r\n */\r\nfunction calculate(len) {\r\n   return Math.floor(Math.random() * len);\r\n}\r\n\r\n/**\r\n * 数组随机\r\n * @param  {[type]} num [description]\r\n * @return {[type]}     [description]\r\n */\r\nfunction arrRandom(arr) {\r\n    arr.sort(function() {\r\n        return Math.random() > 0.5 ? -1 : 1;\r\n    })\r\n    return arr;\r\n}\r\n\r\n/**\r\n * 上下算法\r\n * @return {[type]} [description]\r\n */\r\nfunction upToDown(randomOrder, originalOrder) {\r\n    var beforeOrder;\r\n    var order;\r\n    for (var i = 0, len = originalOrder.length; i < len; i++) {\r\n        randomOrder[i] = [];\r\n        for (var j = 0, orderLen = originalOrder[i].length; j < orderLen; j++) {\r\n            //随机数\r\n            order = calculate(orderLen);\r\n            //去重,保证唯一\r\n            if (randomOrder[i].length > 0) {\r\n                while (jQuery.inArray(order, randomOrder[i]) > -1) {\r\n                    order = calculate(orderLen)\r\n                }\r\n            }\r\n            randomOrder[i].push(order);\r\n        }\r\n    }\r\n    for (i = 0; i < randomOrder.length; i++) {\r\n        order = randomOrder[i];\r\n        if (beforeOrder) {\r\n            //保证不一致\r\n            if (order.toString() == beforeOrder.toString()) {\r\n                return this.random(originalOrder);\r\n            }\r\n        }\r\n        beforeOrder = order;\r\n    }\r\n}\r\n\r\n\r\n\r\n/**\r\n * 完全随机\r\n * @return {[type]} [description]\r\n */\r\nfunction completelyRandom(originalOrder,randomOrder){\r\n    var arr = []\r\n    //取出原始数\r\n    for (var i = 0, len = originalOrder.length; i < len; i++) {\r\n        for (var j = 0, orderLen = originalOrder[i].length; j < orderLen; j++) {\r\n            arr.push(originalOrder[i][j])\r\n        }\r\n    }\r\n    //随机一次\r\n    arrRandom(arr)\r\n\r\n    //合并到randomOrder\r\n    for (i = 0, len = originalOrder.length; i < len; i++) {\r\n        randomOrder[i] = [];\r\n        for (var j = 0, orderLen = originalOrder[i].length; j < orderLen; j++) {\r\n            randomOrder[i].push(arr[j + (i * orderLen)])\r\n        }\r\n    }\r\n}\r\n\r\n\r\n//随机算法\r\nexports.random = function(originalOrder, algorithm) {\r\n    var randomOrder = [];\r\n    switch (algorithm) {\r\n        case 1:\r\n            upToDown(originalOrder,randomOrder)\r\n            break\r\n        case 2:\r\n            completelyRandom(originalOrder,randomOrder)\r\n            break;\r\n    }\r\n    return randomOrder;\r\n}\r\n\r\n\r\n//找到容器ul\r\nexports.findContainer = function(event, appoint) {\r\n    var elem, elementName;\r\n    if (elem = event.target) {\r\n        //指定元素\r\n        if (appoint && appoint != elem.nodeName.toLowerCase()) {\r\n            return;\r\n        }\r\n        while ((elem = elem['parentNode']) && elem.nodeType !== 9) {\r\n            if (elem.nodeType === 1) {\r\n                elementName = elem.nodeName.toLowerCase();\r\n                if (elementName == 'ul') {\r\n                    return elem;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexports.pushArray = function(obj, key, fn) {\r\n    if (!obj[key]) {\r\n        obj[key] = [];\r\n    }\r\n    fn(obj[key])\r\n}\r\n\r\nvar once = false;\r\nexports._bind = function() {\r\n    this.$container.on('mousedown touchstart', function() {\r\n        this.$container.off('mousedown touchstart')\r\n        this.triggerClick(event)\r\n        console.log(1)\r\n        return false;\r\n    }.bind(this))\r\n\r\n    if (!once) {\r\n        once = true;\r\n        this.$container.on(animationend, function(event) {\r\n            this.animCallback(event);\r\n            return false;\r\n        }.bind(this));\r\n    }\r\n}\r\n\r\n\r\n\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/instance/depend.js\n ** module id = 10\n ** module chunks = 0\n **/","/**\r\n * 触发器\r\n * @return {[type]} [description]\r\n */\r\n\r\nfunction Observer(ctx) {\r\n    this._ctx = ctx || this\r\n}\r\n\r\nvar o = Observer.prototype\r\n\r\no.on = function(event, fn) {\r\n    this._callback = this._callback || {};\r\n    (this._callback[event] = this._callback[event] || [])\r\n    .push(fn)\r\n    return this\r\n}\r\n\r\no.once = function(event, fn) {\r\n    var self = this\r\n    this._callback = this._callback || {}\r\n\r\n    function on() {\r\n        self.off(event, on)\r\n        fn.apply(this, arguments)\r\n    }\r\n\r\n    on.fn = fn\r\n    this.on(event, on)\r\n    return this\r\n}\r\n\r\n/**\r\n * 检测对应事件是否存在\r\n * @return {[type]} [description]\r\n */\r\no.checkExists = function(event) {\r\n    return this._callback[event]\r\n}\r\n\r\no.off = function(event, fn) {\r\n    this._callback = this._callback || {}\r\n\r\n    // all\r\n    if (!arguments.length) {\r\n        this._callback = {}\r\n        return this\r\n    }\r\n\r\n    // specific event\r\n    var callbacks = this._callback[event]\r\n    if (!callbacks) return this\r\n\r\n    // remove all handlers\r\n    if (arguments.length === 1) {\r\n        delete this._callback[event]\r\n        return this\r\n    }\r\n\r\n    // remove specific handler\r\n    var cb\r\n    for (var i = 0; i < callbacks.length; i++) {\r\n        cb = callbacks[i]\r\n        if (cb === fn || cb.fn === fn) {\r\n            callbacks.splice(i, 1)\r\n            break\r\n        }\r\n    }\r\n    return this\r\n}\r\n\r\no.notify = function(event, a, b, c, d) {\r\n    this._callback = this._callback || {}\r\n    var callbacks = this._callback[event]\r\n    if (callbacks) {\r\n        callbacks = callbacks.slice(0)\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            callbacks[i].call(this._ctx, a, b, c, d)\r\n        }\r\n    }\r\n\r\n    return this\r\n}\r\n\r\nmodule.exports = Observer\r\n\r\n\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/observer/index.js\n ** module id = 11\n ** module chunks = 0\n **/","\r\nvar utils = require('../utils');\r\nvar depend = require('./depend');\r\n/**\r\n * 动态布局\r\n */\r\n \r\nexports._initCreate = function() {\r\n    var level = this.options.level;\r\n    this.debrisWidth = this.contentWidth / level.row;\r\n    this.debrisHeight = this.contentHeight / level.col;\r\n    this._initLayer();\r\n}\r\n\t\r\n\r\nexports._initLayer = function() {\r\n    var index;\r\n    var $ul;\r\n    var $li;\r\n    var uls = [];\r\n    var debrisWidth   = this.debrisWidth;\r\n    var debrisHeight  = this.debrisHeight;\r\n    var options       = this.options;\r\n    var level         = options.level\r\n    var row           = level.row;\r\n    var col           = level.col;\r\n    var images        = options.images;\r\n    var randomOrder   = this.randomOrder;\r\n    var contentHeight = this.contentHeight;\r\n\r\n\r\n    var createStr = function(i, j) {\r\n        var width  = options.gap.left;\r\n        var height = options.gap.top;\r\n        var top    = height/2;\r\n        var innerdiv = function() {\r\n            return utils.format(\r\n                '<ul data-col={0} data-row={1} class=\"cd-item-wrapper\" style=\"position:relative;width:{2}px;height:{3}px;margin:0 auto;margin-top:{4}px;\">' +\r\n\t               \t'<li data-type=\"front\" class=\"is-visible\"> ' +\r\n\t                \t'<img src=\"{5}\" width=\"{7}\" height=\"{8}\">' +\r\n\t                '</li>' +\r\n\t                '<li data-type=\"back\" class=\"is-hidden\">' +\r\n\t                \t'<img src=\"{6}\" width=\"{7}\" height=\"{8}\">' +\r\n\t                '</li>' +\r\n                '</ul>',\r\n                i, j,\r\n                debrisWidth-width,\r\n                debrisHeight-height,\r\n                top,\r\n\r\n                images.front,\r\n                images.back[randomOrder[i][j]],\r\n\r\n                debrisWidth-width,\r\n                debrisHeight-height\r\n            )\r\n        }\r\n        var str = utils.format(\r\n            '<li style=\"' +\r\n            'width:{0}px;' +\r\n            'height:{1}px;' +\r\n            'left:{2}px;' +\r\n            'position:absolute;' +\r\n            '\">' + innerdiv() +\r\n            '</li>',\r\n            debrisWidth,\r\n            debrisHeight,\r\n            j * debrisWidth\r\n        )\r\n        return $(str)\r\n    }\r\n\r\n    //生成 row * col 的矩阵\r\n    for (var i = 0; i < col; i++) {\r\n        $ul = $(document.createElement('ul')).css({\r\n            'width': this.contentWidth,\r\n            'height': debrisHeight,\r\n            'overflow': 'hidden', //1111111\r\n            'position': 'relative' //1111111\r\n        });\r\n        //增加样式\r\n        $ul.addClass('cd-gallery cd-container')\r\n        for (var j = 0; j < row; j++) {\r\n            $li = createStr(i, j);\r\n            $ul.append($li)\r\n            depend.pushArray(this.originalOrder, i, function(arr) {\r\n                arr.push(j);\r\n            })\r\n        }\r\n        uls.push($ul)\r\n    }\r\n    var $fragment = $(document.createElement('createDocumentFragment'));\r\n    $.each(uls, function(index, ul) {\r\n        $fragment.append(ul)\r\n    })\r\n    this.$container.append($fragment[0].childNodes);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/instance/layout.js\n ** module id = 12\n ** module chunks = 0\n **/","/**\r\n * 冒泡事件\r\n */\r\nvar depend = require('./depend');\r\nvar animationend = 'webkitAnimationEnd oanimationend msAnimationEnd animationend';\r\n\r\n\r\nexports._initEvent = function() {\r\n\tthis.$container.on('mousedown touchstart', function() {\r\n\t\tthis.triggerClick(event)\r\n\t\treturn false;\r\n\t}.bind(this))\r\n\r\n\tthis.$container.on(animationend, function(event) {\r\n\t\tthis.animCallback(event);\r\n\t\treturn false;\r\n\t}.bind(this));\r\n\t// depend._bind.call(this);\r\n}\r\n \n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/instance/event.js\n ** module id = 13\n ** module chunks = 0\n **/","var depend = require('./depend');\r\nvar utils = require('../utils');\r\n\r\n/**\r\n * 手动触发\r\n */\r\nexports.getPos = function(element) {\r\n    return {\r\n        'col': parseInt(element.getAttribute('data-col')),\r\n        'row': parseInt(element.getAttribute('data-row'))\r\n    }\r\n}\r\n\r\nexports.runAnim = function(element, status) {\r\n    var $element = $(element)\r\n    $element.find('.is-hidden').addClass('is-selected')\r\n    $element.addClass('is-switched');\r\n    if (status) {\r\n        //给每一个li ->anim  增加状态\r\n        var $children = $element.children();\r\n        $children.each(function(i, elem) {\r\n            elem.setAttribute('data-status', status)\r\n        })\r\n    }\r\n}\r\n\r\n/**\r\n * 去重复\r\n * @param  {[type]} element     [description]\r\n * @param  {[type]} collections [description]\r\n * @return {[type]}             [description]\r\n */\r\nfunction toRepeat(element,collections) {\r\n    return -1 !== collections.indexOf(element) ? true :false;\r\n}\r\n\r\nexports.triggerClick = function(event) {\r\n    var element;\r\n    if (element = depend.findContainer(event, 'img')) {\r\n        //如果有重复元素\r\n        if (toRepeat(element,this.trackAnims.elems)) {\r\n            return\r\n        }\r\n        //最多2个同时点击，并且不是重复\r\n        //或者是禁止点击的元素了(动画结束了)\r\n        if (this.trackAnims.elems.length > 1\r\n            || element.getAttribute('data-status') === 'close') { //已完成动画\r\n            return\r\n        }\r\n        this.trackAnims.elems.push(element);\r\n        this.runAnim(element);\r\n    }\r\n}\r\n\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/instance/trigger.js\n ** module id = 14\n ** module chunks = 0\n **/","/**\r\n * 动画回调处理\r\n */\r\n\r\nvar depend = require('./depend');\r\nvar utils  = require('../utils');\r\n\r\n/**\r\n * 检测回调的唯一性\r\n * @param  {[type]} event [description]\r\n * @return {[type]}       [description]\r\n */\r\nvar checkUnique = function(event) {\r\n    var ul = depend.findContainer(event);\r\n    var index = this.trackAnims.cache.indexOf(ul);\r\n    if (~index) {\r\n        this.trackAnims.cache.splice(index, 1)\r\n        return false;\r\n    }\r\n    this.trackAnims.cache.push(ul);\r\n    return true;\r\n}\r\n\r\n/**\r\n * 状态值\r\n * @type {Object}\r\n */\r\nvar stateValue = {\r\n    'back'  :'front',\r\n    'front' :'back'\r\n};\r\n\r\n\r\n/**\r\n * 重设新的状态\r\n * @return {[type]} [description]\r\n */\r\nvar restoreState = function(elem,filter){\r\n    //重设值的状态\r\n    elem[0].setAttribute('data-type' , stateValue[filter])\r\n}\r\n\r\n/**\r\n * 恢复属性\r\n * @param  {[type]} context [description]\r\n * @param  {[type]} parent  [description]\r\n * @param  {[type]} filter  [description]\r\n * @return {[type]}         [description]\r\n */\r\nvar restoreProperties = function(elem, parent, filter) {\r\n    var related = {\r\n        front: function() {\r\n            elem.removeClass('is-visible is-selected').addClass('is-hidden');\r\n        },\r\n        back: function() {\r\n            elem.addClass('is-visible').removeClass('is-hidden is-selected');\r\n        }\r\n    }\r\n    related[filter]();\r\n    parent.removeClass('is-switched')\r\n    //设置状态值\r\n    restoreState(elem,filter);\r\n}\r\n\r\n\r\n/**\r\n * 动画回调\r\n * @param  {[type]} event [description]\r\n * @return {[type]}       [description]\r\n */\r\nvar autoRestoreAmount = 4;\r\nexports.animCallback = function(event) {\r\n    var ul,\r\n        $ul,\r\n        pos,\r\n        elem,\r\n        $elem,\r\n        elems,\r\n        level,\r\n        index,\r\n        filter,\r\n        parent,\r\n        $parent;\r\n\r\n    level   = this.options.level;\r\n    elem    = event.target;\r\n    parent  = depend.findContainer(event)\r\n    $elem   = $(elem);\r\n    $parent = $(parent);\r\n\r\n\r\n    //////////////////////////////////\r\n    ///\r\n    ///  自动动画：\r\n    ///     比较动画后，不一致自动还原\r\n    ///     \r\n    ///===============================\r\n    var status = elem.getAttribute('data-status');\r\n    if (status === 'autoRestore') {\r\n        elem.removeAttribute('data-status');\r\n        filter = elem.getAttribute('data-type')\r\n        restoreProperties($elem,$parent,filter);\r\n        //最后一个动画\r\n        if (1 === autoRestoreAmount) {\r\n            this.trackAnims.elems.length = 0;\r\n            this.observer.notify('change:fail');\r\n            autoRestoreAmount = 4;\r\n            return\r\n        }\r\n        --autoRestoreAmount;\r\n        return;\r\n    }\r\n\r\n    //处理动画元素\r\n    ///  过滤：\r\n    ///  1 每个元素动画的2个li回调\r\n    ///  2 每col都运行了动画\r\n    //每个li元素都会执行\r\n    filter = elem.getAttribute('data-type')\r\n    restoreProperties($elem, $parent, filter)\r\n\r\n    //保证只回调一次\r\n    //每一组动画回调一次\r\n    if (checkUnique.call(this, event)) {\r\n        return false;\r\n    }\r\n    $parent.attr('data-status', 'close');\r\n\r\n\r\n    //合并2个组动画\r\n    this.trackAnims.triggerTime.push(elem)\r\n    if (this.trackAnims.triggerTime.length !== level.col) {\r\n        return;\r\n    }\r\n    this.trackAnims.triggerTime.length = 0;\r\n\r\n\r\n    ////////////\r\n    //成功与失败处理 //\r\n    ////////////\r\n    var i;\r\n    var self = this;\r\n    //得到正确索引\r\n    var standardElement;\r\n    //动作\r\n    var succeed = true;\r\n    //获取定位坐标\r\n    var getIndex = function(element) {\r\n        var pos = self.getPos(element);\r\n        return self.randomOrder[pos.col][pos.row];\r\n    };\r\n\r\n    //运行动画的元素\r\n    elems = this.trackAnims.elems;\r\n\r\n    //取出第一个对比值\r\n    standardElement = elems[0];\r\n    index = getIndex(standardElement)\r\n    for (i = 1; i < elems.length; i++) {\r\n        elem = elems[i];\r\n        if (index != getIndex(elem)) {\r\n            succeed = false;\r\n            break;\r\n        }\r\n    }\r\n\r\n    if (succeed) {\r\n        elems.forEach(function(elem) {\r\n            //完成\r\n            $(elem)\r\n                .attr('data-status', 'close')\r\n                .css({\r\n                    'transition-delay': '100ms',\r\n                    'transition-duration': '1000ms',\r\n                    'opacity': 0\r\n                }).on(utils.style.transitionend, function() {\r\n                    //全部完成\r\n                    if (self.trackAnims.times === self.trackAnims.total) {\r\n                        self.observer.notify('change:complete');\r\n                    }\r\n                })\r\n        })\r\n        this.trackAnims.times += elems.length;\r\n        this.trackAnims.elems.length = 0;\r\n        this.observer.notify('change:success');\r\n    } else { //失败\r\n        elems.forEach(function(elem, index) {\r\n            elem.removeAttribute('data-status')\r\n            self.runAnim(elem, 'autoRestore')\r\n        })  \r\n    }\r\n}\r\n \n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/instance/animrelated.js\n ** module id = 15\n ** module chunks = 0\n **/","/**\r\n * 销毁\r\n * @return {[type]} [description]\r\n */\r\nexports.destroy = function() {\r\n\tthis.$container.off();\r\n\tthis.observer.off();\r\n\tthis.$container.empty();\r\n\tthis.$container = null;\r\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/instance/destroy.js\n ** module id = 16\n ** module chunks = 0\n **/"],"sourceRoot":""}